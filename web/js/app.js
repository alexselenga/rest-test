(function(e){function t(t){for(var n,o,c=t[0],s=t[1],l=t[2],u=0,v=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&v.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);d&&d(t);while(v.length)v.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,c=1;c<a.length;c++){var s=a[c];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"secondary",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),e._v(" REST Тест ")],1)]),a("v-main",[a("Contacts")],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.contacts,search:e.search,"sort-by":"name"},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v("Телефонная книга")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Поиск","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",r,!1),n),[e._v(" Добавить ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Имя",rules:e.rules.name},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{label:"Телефон",rules:e.rules.phone},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{label:"Код страны"},model:{value:e.editedItem.country_code,callback:function(t){e.$set(e.editedItem,"country_code",t)},expression:"editedItem.country_code"}})],1)],1),e.errors.length?a("div",{staticClass:"error--text",domProps:{innerHTML:e._s(e.errors)}}):e._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Отмена ")]),a("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:!e.valid},on:{click:e.save}},[e._v(" Сохранить ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Вы действительно хотите"),a("br"),e._v("удалить пользователя?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDelete}},[e._v("Отмена")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Да")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(n)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(n)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Обновить ")])]},proxy:!0}])})],1)},c=[],s=(a("99af"),a("a15b"),a("d81d"),a("a434"),a("96cf"),a("1da1")),l=a("bc3a"),d=a.n(l),u=Object({NODE_ENV:"production",BASE_URL:"/"}).REST_APP_URL+"contacts";console.log(Object({NODE_ENV:"production",BASE_URL:"/"}));var v={name:"Contacts",data:function(){return{search:"",dialog:!1,dialogDelete:!1,errors:"",headers:[{text:"Имя",value:"name",align:"start"},{text:"Телефон",value:"phone",align:"start",sortable:!1},{text:"Код страны",value:"country_code",align:"start"},{text:"Действия",value:"actions",sortable:!1}],contacts:[],editedIndex:-1,editedItem:{id:null,name:"",phone:"",country_code:""},defaultItem:{id:null,name:"",phone:"",country_code:""},rules:{name:[function(e){return!!e||"Необходимо заполнить."}],phone:[function(e){return!!e||"Необходимо заполнить."}]},valid:!0}},computed:{formTitle:function(){return-1===this.editedIndex?"Добавить контакт":"Редактирование контакта"}},watch:{dialog:function(e){e||(this.$refs.form.resetValidation(),this.errors="",this.close())},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.initialize()},methods:{initialize:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(u);case 2:a=t.sent,e.contacts=a.data;case 4:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.contacts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},save:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,!(e.editedIndex>-1)){t.next=10;break}return t.next=6,d.a.put("".concat(u,"/").concat(e.editedItem.id),e.editedItem,{withCredentials:!0});case 6:a=t.sent,Object.assign(e.contacts[e.editedIndex],a.data),t.next=15;break;case 10:return t.next=12,d.a.post(u,e.editedItem,{withCredentials:!0});case 12:n=t.sent,console.log(n.data),e.contacts.push(n.data);case 15:e.close(),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),422===t.t0.response.status?e.errors=t.t0.response.data.map((function(e){return e.message})).join("<br>"):e.errors="Сетевая ошибка (".concat(t.t0.response.status,").");case 21:case"end":return t.stop()}}),t,null,[[2,18]])})))()},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))},deleteItem:function(e){this.editedIndex=this.contacts.indexOf(e),this.editedItem=Object.assign({},e),this.dialogDelete=!0},deleteItemConfirm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.a.delete("".concat(u,"/").concat(e.editedItem.id),{withCredentials:!0});case 2:e.contacts.splice(e.editedIndex,1),e.closeDelete();case 4:case"end":return t.stop()}}),t)})))()},closeDelete:function(){var e=this;this.dialogDelete=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}))}}},f=v,p=a("2877"),m=a("6544"),h=a.n(m),b=a("8336"),x=a("b0af"),g=a("99d9"),_=a("62ad"),y=a("a523"),k=a("8fea"),I=a("169a"),w=a("ce7e"),O=a("4bd4"),V=a("132d"),C=a("0fd9"),j=a("2fa4"),T=a("8654"),D=a("71d9"),R=a("2a7f"),S=Object(p["a"])(f,o,c,!1,null,null,null),E=S.exports;h()(S,{VBtn:b["a"],VCard:x["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:_["a"],VContainer:y["a"],VDataTable:k["a"],VDialog:I["a"],VDivider:w["a"],VForm:O["a"],VIcon:V["a"],VRow:C["a"],VSpacer:j["a"],VTextField:T["a"],VToolbar:D["a"],VToolbarTitle:R["a"]});var P={components:{Contacts:E}},$=P,A=a("7496"),M=a("40dc"),L=a("adda"),z=a("f6c4"),B=Object(p["a"])($,r,i,!1,null,null,null),N=B.exports;h()(B,{VApp:A["a"],VAppBar:M["a"],VImg:L["a"],VMain:z["a"]});var U=a("f309"),F=a("0879");n["a"].use(U["a"]);var J=new U["a"]({lang:{locales:{ru:F["a"]},current:"ru"}});n["a"].config.productionTip=!1,new n["a"]({vuetify:J,render:function(e){return e(N)}}).$mount("#app")}});
//# sourceMappingURL=app.js.map